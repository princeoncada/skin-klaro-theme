{% assign kora_array = product.metafields.kora %}

{% if kora_array.ingredients_title.value.size > 0 %}
<section>
    <div class="x-py-[36px] x-font-myriad-pro">
        <div class="x-px-[16px] x-mb-[40px]">
            <p data-aos="fade-up" data-aos-duration="1000" data-aos-once="true"
                class="x-text-[14px] md:x-text-[18px] x-tracking-[2px] md:x-tracking-[3px] x-leading-[19.6px] md:x-leading-[21.6px] x-text-center x-pb-[10px] md:x-pb-[16px]">
                ULTRA-NOURISHING</p>
            <h1 data-aos="fade-up" data-aos-duration="1000" data-aos-delay="200" data-aos-once="true"
                class="x-text-[32px] md:x-text-[40px] lg:x-text-[52px] x-leading-[38.4px] md:x-leading-[48px] lg:x-leading-[52px] x-text-center x-font-amandine x-font-light">
                Skin-Loving
                Ingredients</h1>
        </div>
        <div class="x-px-[16px] x-flex x-flex-row x-gap-[10px] x-overflow-scroll no-scrollbar md:x-hidden">
            {% assign delay = 0 %}

            {% for title in product.metafields.kora.ingredients_title.value %}
            {% assign index = forloop.index0 %}
            {% assign title = kora_array.ingredients_title.value[index] %}
            {% assign image = kora_array.ingredients_image.value[index] %}
            {% assign description = kora_array.ingredients_description.value[index] %}

            <div class="x-w-[280px] x-min-w-[280px]">
                <div class="x-aspect-square x-bg-red-700 x-bg-cover x-bg-center"
                    style="background-image: url({{ image }});">
                </div>
                <div class="x-mt-[20px]">
                    <h1 data-aos="fade-up" data-aos-duration="1000" data-aos-delay="{{ delay }}" data-aos-once="true" class="x-text-[20px] x-leading-[24px] x-text-center x-font-amandine x-font-light">{{ title }}
                    </h1>
                    <p data-aos="fade-up" data-aos-duration="1000" data-aos-delay="{{ delay | plus: 200 }}" data-aos-once="true" class="x-my-[10px] x-text-[12px] x-leading-[16.8px] x-text-center">{{ description }}</p>
                </div>
            </div>
            {% assign delay = delay | plus: 200 %}      
            {% endfor %}
        </div>
        <div class="hidden md:x-block">
            <!-- Slider main container -->
            <div class="swiper x-flex x-relative">
                <!-- Additional required wrapper -->
                <div class="swiper-wrapper x-flex x-flex-row">
                    {% assign delay = 0 %}
                    {% for title in product.metafields.kora.ingredients_title.value %}
                    {% assign index = forloop.index0 %}
                    {% assign title = kora_array.ingredients_title.value[index] %}
                    {% assign image = kora_array.ingredients_image.value[index] %}
                    {% assign description = kora_array.ingredients_description.value[index] %}


                    <div class="swiper-slide x-min-w-1/5">
                        <div class="">
                            <div class="x-aspect-square x-bg-red-700 x-bg-cover x-bg-center"
                                style="background-image: url({{ image }});">
                            </div>
                            <div class="x-mt-[20px]">
                                <h1 data-aos="fade-up" data-aos-duration="1000" data-aos-delay="{{ delay }}" data-aos-once="true"
                                    class="x-text-[20px] md:x-text-[26px] lg:x-text-[34px] x-leading-[24px] md:x-leading-[28.6px] lg:x-leading-[35.7px] x-text-center x-font-amandine x-font-light">
                                    {{ title }}
                                </h1>
                                <p data-aos="fade-up" data-aos-duration="1000" data-aos-delay="{{ delay | plus: 200 }}" data-aos-once="true"
                                    class="x-my-[10px] x-text-[12px] md:x-text-[14px] md:x-px-[8px] lg:x-text-[16px] x-leading-[16.8px] md:x-leading-[19.2px] lg:x-leading-[21.6px] x-text-center">
                                    {{ description }}
                                </p>
                            </div>
                        </div>
                    </div>
                    {% assign delay = delay | plus: 200 %}   
                    {% endfor %}
                </div>
                <!-- If we need navigation buttons -->
                <div class="x-h-full x-absolute x-z-10 x-left-[4px] x-flex x-items-center">
                    <div
                        class="swiper-button custom-button-prev x-rounded-full x-bg-[#ffffff80] x-p-[4px] x-border-[#434341] x-border-[1px]">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-arrow-left">
                            <path d="m12 19-7-7 7-7" />
                            <path d="M19 12H5" />
                        </svg>
                    </div>
                </div>
                <div class="x-h-full x-absolute x-z-10 x-right-[4px] x-flex x-items-center">
                    <div
                        class="swiper-button custom-button-next x-rounded-full x-bg-[#ffffff80] x-p-[4px] x-border-[#434341] x-border-[1px]">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-arrow-right">
                            <path d="M5 12h14" />
                            <path d="m12 5 7 7-7 7" />
                        </svg>
                    </div>
                </div>
            </div>


            <script>

                const swiper = new Swiper('.swiper', {
                    // Optional parameters
                    direction: 'horizontal',
                    slidesPerView: 4,
                    centerInsufficientSlides: true,
                    spaceBetween: 20,

                    // Navigation arrows
                    navigation: {
                        nextEl: '.custom-button-next',
                        prevEl: '.custom-button-prev',
                    },
                });
            </script>

            <style>
                .swiper-button {
                    cursor: pointer;
                    transition: opacity 0.5s;
                }

                .swiper-button-disabled {
                    opacity: 0;
                }
            </style>
        </div>
    </div>
</section>
{% endif %}