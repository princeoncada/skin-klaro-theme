<!-- templates/page.load-snippet.liquid -->
{% assign product_handle = request.query.product_handle %}
{% assign product = all_products[product_handle] %}

{% if product %}
  <!-- Testing basic output to check if product is resolving correctly -->
  <div>
    <p>Product found: {{ product.title }}</p>
    <p>Price: {{ product.price | money }}</p>
  </div>

  <!-- Use the same card snippet with careful checks -->
  {% render 'custom-product-card', product: product %}
{% else %}
  <p>Product not found</p>
{% endif %}
